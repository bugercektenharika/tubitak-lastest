
<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>DoYouMean — Gerçek Site Doğrulayıcı</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Font -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

  <!-- Bootstrap (sadece layout için) -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">

  <style>
    :root {
      --bg: #0a0a0a;
      --card: #111;
      --text: #e0e0e0;
      --accent: #4f46e5;
      --success: #10b981;
      --danger: #ef4444;
    }

    * { font-family: 'Inter', sans-serif; }

    body {
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
    }

    /* NAV */
    .navbar {
      backdrop-filter: blur(12px);
      background: rgba(10,10,10,0.65);
    }

    .navbar-brand {
      font-weight: 700;
      letter-spacing: 0.4px;
    }

    /* HERO */
    .hero {
      min-height: 80vh;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
    }

    .hero p { color: #aaa; }

    /* SEARCH */
    .search-box {
      max-width: 620px;
      margin: auto;
    }

    .search-box input {
      background: var(--card);
      border: 1px solid #222;
      color: var(--text);
      padding: 1rem;
      transition: .25s;
    }

    .search-box input:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 3px rgba(79,70,229,.25);
      background: #0f0f0f;
    }

    .search-box button {
      background: var(--accent);
      border: none;
      font-weight: 600;
      padding: 1rem 1.5rem;
    }

    /* RESULT */
    .result-card {
      background: var(--card);
      border: 1px solid #222;
      border-radius: 14px;
      padding: 1.5rem;
      margin-top: 2rem;
      display: none;
      text-align: left;
    }

    .result-link {
      color: var(--accent);
      font-weight: 600;
      font-size: 1.05rem;
      word-break: break-all;
    }

    .copy-btn {
      cursor: pointer;
      margin-left: .5rem;
      color: #aaa;
    }

    .copy-btn:hover { color: var(--accent); }

    .status-success { color: var(--success); font-weight: 600; }
    .status-error { color: var(--danger); font-weight: 600; }

    footer {
      border-top: 1px solid #222;
      color: #777;
      font-size: .9rem;
    }
  </style>
</head>

<body>

<!-- NAV -->
<nav class="navbar navbar-expand fixed-top">
  <div class="container">
    <a class="navbar-brand text-light" href="/">DoYouMean</a>
    <div class="ms-auto">
      <a class="nav-link d-inline text-light me-3" href="#">Nasıl Çalışır?</a>
      <a class="nav-link d-inline text-light" href="#">Hakkımızda</a>
    </div>
  </div>
</nav>

<!-- HERO -->
<section class="hero container">
  <div>
    <h1>Gerçeği Kontrol Et. Güvenle Tıkla.</h1>
    <p>Şüpheli marka veya alan adlarını resmi adresleriyle doğrula.</p>

    <form id="searchForm" class="search-box d-flex gap-2">
      <input id="query" class="form-control"
             placeholder="Örn: google, discord, steam" required>
      <button class="btn btn-primary">Doğrula</button>
    </form>

    <!-- RESULT -->
    <div id="result" class="result-card">
      <div id="loading" class="text-center">
        <div class="spinner-border text-primary"></div>
      </div>

      <div id="success" class="d-none">
        <p class="status-success">
          <i class="bi bi-shield-check"></i> Resmi Web Sitesi Doğrulandı
        </p>
        <div class="d-flex align-items-center">
          <a id="resultLink" class="result-link" target="_blank"></a>
          <i id="copyBtn" class="bi bi-clipboard copy-btn"></i>
        </div>
        <small id="copyMsg" class="text-success d-none">Kopyalandı!</small>
      </div>

      <div id="error" class="d-none">
        <p class="status-error">
          <i class="bi bi-x-circle"></i>
          Eşleşme bulunamadı veya site çok yeni.
        </p>
      </div>
    </div>
  </div>
</section>

<footer class="py-4 text-center">
  © {{ year or 2025 }} DoYouMean
</footer>

<script>
  const form = document.getElementById("searchForm");
  const result = document.getElementById("result");
  const loading = document.getElementById("loading");
  const success = document.getElementById("success");
  const error = document.getElementById("error");
  const resultLink = document.getElementById("resultLink");
  const copyBtn = document.getElementById("copyBtn");
  const copyMsg = document.getElementById("copyMsg");

  form.addEventListener("submit", async (e) => {
    e.preventDefault();

    const query = document.getElementById("query").value.trim();
    if (!query) return;

    result.style.display = "block";
    loading.style.display = "block";
    success.classList.add("d-none");
    error.classList.add("d-none");

    try {
      const res = await fetch("/check", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ query })
      });

      const data = await res.json();
      loading.style.display = "none";

      if (data.success) {
        resultLink.href = data.url;
        resultLink.textContent = data.url;
        success.classList.remove("d-none");
      } else {
        error.classList.remove("d-none");
      }

    } catch {
      loading.style.display = "none";
      error.classList.remove("d-none");
    }
  });

  copyBtn.addEventListener("click", () => {
    navigator.clipboard.writeText(resultLink.textContent);
    copyMsg.classList.remove("d-none");
    setTimeout(() => copyMsg.classList.add("d-none"), 1500);
  });
</script>

</body>
</html>
